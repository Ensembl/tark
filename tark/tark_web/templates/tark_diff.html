{% extends "web_home.html" %}

{% block extra_scripts %}
 <script>
 jQuery(function($) {
    $("#id_diff_me_assembly").change(function () {
        var assembly_releases = {{ all_assembly_releases|safe|escape }};
        var cur_assembly_name = $(this).val(); 

        var releases = assembly_releases[cur_assembly_name] || [];
        
        var options = $.map(releases, function(release){
            return '<option value="' + release + '">' + release + '</option>'
        }).join('');
        $("#id_diff_me_release").html(options);
    });
    
    $("#id_diff_with_assembly").change(function () {
       var assembly_releases = {{ all_assembly_releases|safe|escape }};
        var cur_assembly_name = $(this).val(); 

        var releases = assembly_releases[cur_assembly_name] || [];
        var options = $.map(releases, function(release){
            return '<option value="' + release + '">' + release + '</option>'
        }).join('');
        $("#id_diff_with_release").html(options);
    });
  });
  </script>
{% endblock %}


{% load staticfiles %}
{% load add_class %}

{% block content %}

<div class="container" style="padding-top:20px;">

<div class="panel panel-info ">
  <div class="panel-heading"><i class="glyphicon glyphicon-info-sign"></i> <strong>Tark Transcript Diff</strong></div>
  <div class="panel-body">
  Use this tool to find differences between the releases for the given Transcript (eg: ENST00000279783 or ENST00000639989)
  </div>
</div>

<form id="diff_form" class="form-horizontal" method="POST" action="">
{% csrf_token %}

 {% for error in form.non_field_errors %}
      <div class="form-group has-errors text-danger small">
        {{error}}
     </div>
 {% endfor %}


  <div class="form-group">
    <label class="control-label col-sm-2" for="species">Species:</label>
    <div class="col-sm-4">
     {{ form.species|add_class:"form-control" }}
    </div>
  </div>

  <div class="form-group">
    <label class="control-label col-sm-2" for="stable_id">Transcript Stable ID:</label>
    <div class="col-sm-4 block">
    {{ form.stable_id|add_class:"form-control"}}
    </div>
  </div>


  <div class="form-group">
 
  <label class="control-label col-sm-2" for="diff_me_assembly">Diff Me (Assembly/Release):</label>
   <div class="col-sm-3">
   {{ form.diff_me_assembly|add_class:"form-control"}}
  </div>
 
   <div class="col-sm-1">
    {{ form.diff_me_release|add_class:"form-control"}}
   </div>
  </div>
  


 <div class="form-group">
  <label class="control-label col-sm-2" for="diff_with_assembly">Diff With (Assembly/Release):</label>
  <div class="col-sm-3">
   {{ form.diff_with_assembly|add_class:"form-control"}}
  </div>
  
   <div class="col-sm-1">
    {{ form.diff_with_release|add_class:"form-control"}}
   </div>
  
  
  
</div>


  <div class="form-group"> 
    <div class="col-sm-offset-2 col-sm-4">
      <button type="submit" class="btn btn-primary btn-block">Diff Transcript</button>	
    </div>
  </div>

</form>

</div>

{% endblock %}